<div class="container">
	<h1>注文確認</h1>
	<div class="container">
		<h2>注文商品</h2>
		<table class="table">
			<thead>
				<tr>
					<th>商品番号</th>
					<th>商品名</th>
					<th>金額</th>
					<th>点数</th>
					<th>小計</th>
				</tr>
			</thead>
				<tbody>
					<% @cart_items.each do |item| %>
					<tr>
						<td><%= item.item_id %></td>
						<td><%= Item.find(item.item_id).name %></td>
						<td>¥<%= Item.find(item.item_id).prices * @tax  %>（税込）</td>
						<td><%= item.quantity %></td>
						<td>¥<%= item.quantity * Item.find(item.item_id).prices * @tax %> （税込）</td>
					</tr>
					<% end %>
				</tbody>
		</table>
	</div>
	<div class="container">
		<h2>送料</h2>
		<p>¥<%= @postage %>（税込）</p>
	</div>
	<div class="container">
		<h2>確認内容</h2>
		<table class="table" style="width: 50%">
			<tbody>
				<tr>
					<th>ユーザID</th>
					<td><%= current_customer.id %></td>
				</tr>
				<tr>
					<th>合計金額</th>
					<td>¥<%= @total_price %>（税込）</td>
				</tr>
				<tr>
					<th>支払方法</th>
					<!-- paramsのpayment数値から、支払方法の文字列を取得 -->
					<td><%= Order.get_payment(params[:pay].to_i) %></td>
				</tr>
				<!-- paramsのaddress数値を条件分岐 -->
				<% if params[:address] == "0" %>
				<tr>
					<th>お客様名</th>
					<td><%= @customer.last_name + " " + @customer.first_name %></td>
				</tr>
				<tr>
					<th>お届け先（基本）</th>
					<td><%= @customer.address %></td>
				</tr>
				<tr>
					<th>電話番号</th>
					<td><%= @customer.phone_number %></td>
				</tr>
				<% else %>
				<tr>
					<th>お客様名</th>
					<td><%= @delivery.last_name + " " + @delivery.first_name %></td>
				</tr>
				<tr>
					<th>お届け先（追加）</th>
					<td><%= @delivery.address %></td>
				</tr>
				<tr>
					<th>電話番号</th>
					<td><%= @delivery.phone_number %></td>
				</tr>
				<% end %>
			</tbody>
		</table>
		<p><%= link_to "注文確定", orders_path(pay: params[:pay], address: params[:address]), :method => :post %></p>
		<p><%= link_to "修正する", carts_index_path %></p>
	</div>
</div>