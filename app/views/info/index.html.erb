<h1>情報マスタ</h1>

<select name="select-master">
  <option value="-" selected >選択してください</option>
  <option value="genre">ジャンル</option>
  <option value="artist">アーティスト</option>
  <option value="label">レーベル</option>
</select>

  <div class="genre-form">
    <%= form_for (@genre), url:  admin_genre_index_path do |f| %>
        <%= f.text_field :name %>
        <%= f.submit "登録"%>
    <% end %>
  </div>
  <div class="artist-form">
    <%= form_for (@artist), url:  admin_artist_index_path do |f| %>
        <%= f.text_field :name %>
        <%= f.submit "登録"%>
    <% end %>
  </div>
  <div class="label-form">
    <%= form_for (@label), url:  admin_label_index_path do |f| %>
        <%= f.text_field :name %>
        <%= f.submit "登録"%>
    <% end %>
  </div>

<table class="table">
    <thead>
        <tr>
            <th>ジャンル</th>
            <th>アーティスト</th>
            <th>レーベル</th>
            <th>税率</th>
        </tr>
    </thead>
    <tbody>
        <tr>
          <% @genres.each do |genre| %>
          <td><%= genre.id %></td>
          <td><%= genre.name %></td>
          <!-- best_in_place -->
          <td><%= link_to '編集', info_path(genre) %></td>
          <td><%= link_to "削除", info_path(genre,"genre"), method: :delete,"data-confirm" => "本当に削除しますか？" %></td>
          <% end %>
      </tr>

      <tr>
          <% @artists.each do |artist| %>
          <td><%= artist.id %></td>
          <td><%= artist.name %></td>
          <td><%= link_to '編集', info_path(artist) %></td>
          <td><%= link_to "削除", info_path(artist,"artist"), method: :delete,"data-confirm" => "本当に削除しますか？" %></td>
          <% end %>
      </tr>

      <tr>
          <% @labels.each do |label| %>
          <td><%= label.id %></td>
          <td><%= label.name %></td>
          <td><%= link_to '編集', info_path(label)%></td>,
          <td><%= link_to "削除", info_path(label,"label"), method: :delete,"data-confirm" => "本当に削除しますか？" %></td>
          <% end %>
      </tr>

      <tr>
          <h4>税率</h4>
          <% @taxes.each do |tax| %>
            <td><%= tax.rate*100 %>%</td>
          <% end %>
      </tr>

    </tbody>
</table>





<script>
$(function(){
  $('[name=select-master]').change(function() {
    //選択されたセレクトボックスの値を var textという変数に代入
    var text = $('option:selected').text();
    console.log( text );
    $('.genre-form').hide();
    $('.artist-form').hide();
    $('.label-form').hide();

    if (text == 'ジャンル') {
      console.log("aaaa");
      $('.genre-form').show();
    } else if (text == 'アーティスト') {
      $('.artist-form').css('display','block');
    } else if (text == 'レーベル') {
      $('.label-form').css('display','block');
    }

  });
});
</script>

